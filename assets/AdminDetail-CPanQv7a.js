import{_ as Re,r as b,o as Ue,g as Ae,d as Ve,a as Z,q as Fe,c as ue,w as _e,b as ce,e as ee,f as s,h as t,u as Pe,i as xe,F as h,j,k as A,v as te,l as g,m as be,t as d,n as L,p as D,s as oe,x as Ke,y as qe,T as Ee,z as Oe,A as Ye,B as H,E as We,C as Ge,D as Qe,G as a,H as Je}from"./index-0Cz-3WUr.js";const Xe={class:"min-h-[100dvh] bg-[#F4F7FE] font-khmer flex flex-col relative print-container print:bg-white pb-32"},Ze={class:"bg-white/80 backdrop-blur-2xl border-b border-slate-200/60 sticky top-0 z-40 transition-all shadow-[0_4px_20px_-10px_rgba(0,0,0,0.05)] print:hidden"},et={class:"px-4 md:px-8 py-4 md:py-5"},tt={class:"flex flex-col xl:flex-row xl:items-center justify-between gap-5 mb-5"},ot={class:"flex items-center gap-4"},lt={class:"bg-slate-100/80 p-1.5 rounded-2xl flex overflow-x-auto no-scrollbar w-full xl:w-auto shadow-inner border border-slate-200/50 shrink-0"},st=["onClick"],at={class:"flex flex-wrap items-center gap-3 animate-fade-in min-h-[42px]"},nt={key:0,class:"flex items-center gap-3 bg-white px-4 py-2 rounded-xl border border-slate-200 shadow-sm focus-within:border-indigo-500 w-full sm:w-auto"},rt={key:1,class:"flex gap-2 w-full sm:w-auto"},it={class:"relative group flex-1 sm:flex-none"},dt=["value"],pt={class:"relative group flex-1 sm:flex-none"},ut=["value"],ct={key:2,class:"relative group w-full sm:w-auto"},xt=["value"],bt={key:3,class:"flex items-center gap-3 bg-white px-4 py-2 rounded-xl border border-slate-200 shadow-sm focus-within:border-indigo-500 w-full sm:w-auto"},gt={key:0,class:"flex-1 flex flex-col items-center justify-center py-32 opacity-60 print:hidden"},ft={key:1,class:"flex-1 w-full max-w-[90rem] mx-auto p-4 md:p-8 print:p-0"},vt={class:"bg-gradient-to-r from-slate-800 to-indigo-900 p-6 md:p-8 rounded-[2rem] text-white relative overflow-hidden shadow-lg mb-8 print:hidden"},ht={class:"flex flex-col md:flex-row gap-6 relative z-10"},mt=["src"],wt={class:"flex-1"},yt={class:"text-3xl font-black mb-1"},kt={class:"flex flex-wrap items-center gap-3 text-sm font-medium text-slate-300 mb-4"},_t={class:"bg-white/10 px-2.5 py-1 rounded-lg font-mono"},St=["href"],$t={class:"flex items-center gap-2"},Ct={class:"bg-white/10 px-3 py-1.5 rounded-lg flex items-center gap-2"},zt={class:"text-xs font-bold text-white"},Dt={class:"flex flex-col lg:flex-row justify-between items-center gap-4 mb-6 print:hidden"},Mt={class:"flex items-center gap-2 bg-white p-1.5 rounded-2xl w-full sm:w-fit border border-slate-200 shadow-sm shrink-0 relative z-30"},jt={class:"flex flex-col sm:flex-row items-center gap-3 w-full lg:w-auto bg-white p-2 rounded-2xl shadow-sm border border-slate-200 shrink-0 z-20"},Tt={class:"relative w-full sm:w-64"},Nt={class:"flex items-center gap-2 w-full sm:w-auto justify-end"},Lt={key:0,class:"bg-slate-100 p-1.5 rounded-xl flex border border-slate-200 animate-fade-in shrink-0"},Ht={key:1,class:"bg-slate-100 p-1 rounded-xl flex border border-slate-200 animate-fade-in shrink-0"},It=["disabled"],Bt=["disabled"],Rt={key:0,class:"flex-1 flex items-center justify-center py-20 print:hidden"},Ut={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 animate-fade-in print:hidden"},At=["onClick"],Vt={class:"flex gap-4 items-start"},Ft=["src"],Pt={class:"flex-1 min-w-0"},Kt={class:"font-black text-slate-800 text-lg truncate leading-tight mb-1 group-hover:text-indigo-600 transition-colors"},qt={class:"text-xs font-mono text-slate-500 mb-2 truncate"},Et=["href"],Ot={class:"mt-5 pt-4 border-t border-slate-100 flex flex-col gap-2"},Yt={class:"bg-slate-50 px-3 py-2 rounded-xl flex items-center justify-center text-sm font-bold text-slate-600 gap-2 border border-slate-100"},Wt={key:2,class:"bg-white rounded-3xl border border-slate-200 overflow-hidden shadow-sm animate-fade-in print:hidden"},Gt={class:"overflow-x-auto"},Qt={class:"w-full text-left border-collapse min-w-[800px]"},Jt={class:"bg-slate-50 text-slate-500 text-[11px] uppercase font-black tracking-widest border-b border-slate-200"},Xt={class:"divide-y divide-slate-100"},Zt=["onClick"],eo={class:"px-6 py-4 text-center text-sm font-bold text-slate-400 align-top pt-6"},to={class:"px-6 py-4 align-top pt-5"},oo={class:"flex items-center gap-4"},lo=["src"],so={class:"font-bold text-base text-slate-800 transition-colors group-hover:text-indigo-600"},ao={class:"px-6 py-4 text-center text-sm font-mono font-bold text-slate-500 align-top pt-6"},no={class:"px-6 py-4 text-center text-sm font-medium text-slate-600 align-top pt-6"},ro={class:"px-6 py-4 text-center align-top pt-5"},io=["href"],po={key:1,class:"text-sm text-slate-300 font-bold"},uo={class:"px-6 py-4 align-top pt-6"},co={key:0,class:"font-bold text-slate-800 text-sm"},xo={key:1,class:"text-slate-300 font-bold"},bo={class:"px-6 py-4 align-top pt-5"},go={key:0,class:"flex flex-wrap gap-2 items-center"},fo=["onClick"],vo={key:0},ho={key:1},mo={key:1,class:"text-xs font-bold text-slate-300"},wo={class:"px-6 py-4 text-center align-top pt-6"},yo={key:1,class:"text-slate-300 font-bold"},ko={class:"px-6 py-4 text-center align-top pt-6"},_o={key:0,class:"inline-flex items-center px-3 py-1 bg-amber-50 text-amber-600 rounded-lg text-xs font-bold border border-amber-100 shadow-sm"},So={key:1,class:"text-xs text-slate-300 font-bold"},$o={class:"px-6 py-4 text-right align-top pt-5"},Co={key:0,class:"flex flex-col items-end leading-tight gap-1.5"},zo={class:"text-emerald-700 font-black text-sm bg-emerald-50 px-2.5 py-0.5 rounded-lg border border-emerald-100 shadow-sm"},Do={class:"text-blue-600 font-bold text-xs"},Mo={key:1,class:"text-sm text-slate-300 font-bold"},jo={key:3,class:"mt-6 flex justify-between items-center bg-white p-4 rounded-2xl border border-slate-200 shadow-sm print:hidden"},To={class:"text-xs font-bold text-slate-500 pl-2"},No={class:"flex items-center gap-1.5"},Lo=["disabled"],Ho=["onClick"],Io=["disabled"],Bo={key:2,class:"fixed bottom-6 left-0 right-0 px-4 md:px-8 pointer-events-none flex justify-center z-50 animate-slide-up print:hidden"},Ro={class:"bg-white/95 backdrop-blur-xl border border-slate-200 shadow-[0_10px_40px_rgba(0,0,0,0.15)] p-4 md:px-8 md:py-4 rounded-3xl md:rounded-[2rem] pointer-events-auto flex flex-col md:flex-row items-center gap-4 md:gap-8 max-w-5xl w-full"},Uo={class:"flex-1 flex justify-between md:justify-end items-center gap-6 w-full overflow-x-auto no-scrollbar"},Ao={class:"flex items-center gap-2"},Vo={key:0,class:"text-sm font-black text-slate-700 bg-slate-50 px-3 py-1.5 rounded-xl border border-slate-200 shadow-sm whitespace-nowrap"},Fo={key:0},Po={key:1},Ko={class:"text-right shrink-0 flex items-center gap-5"},qo={class:"text-base font-black text-slate-700"},Eo={class:"text-2xl font-black text-emerald-600 leading-none"},Oo={class:"text-sm font-bold text-blue-600 mt-1"},Yo={key:0,class:"fixed inset-0 z-[999999] flex items-center justify-center p-6 bg-slate-900/60 backdrop-blur-md print:hidden"},Wo={class:"w-full max-w-sm bg-[#18181b] border border-white/10 rounded-3xl p-10 shadow-2xl relative flex flex-col items-center text-center animate-fade-in-up"},Go={class:"relative w-20 h-20 mb-8"},Qo={class:"absolute inset-0 flex items-center justify-center font-bold text-white text-lg font-mono"},Jo={class:"text-xl font-bold text-white mb-2"},Xo={class:"w-full h-1.5 bg-black/50 rounded-full overflow-hidden border border-white/5 mt-4"},le=12,Zo={__name:"AdminDetail",setup(el){const Se=Oe(),O=Ye(),se=Se.params.id,Y=b(!0),m=b({}),W=b([]),T=b([]),ae=b([]),w=b("all"),y=b("monthly"),F=b(new Date().toISOString().split("T")[0]),S=b(new Date().getFullYear()),I=b(new Date().getMonth()),G=b(new Date().toISOString().split("T")[0]),Q=b(new Date().toISOString().split("T")[0]),$e=[{key:"daily",label:"ប្រចាំថ្ងៃ"},{key:"monthly",label:"ប្រចាំខែ"},{key:"yearly",label:"ប្រចាំឆ្នាំ"},{key:"custom",label:"កំណត់ថ្ងៃ"}],ne=["មករា","កុម្ភៈ","មីនា","មេសា","ឧសភា","មិថុនា","កក្កដា","សីហា","កញ្ញា","តុលា","វិច្ឆិកា","ធ្នូ"],f=b("sellers"),B=b("list"),R=b(""),k=b(1),V=b(new Set),P=b(null),$=b({active:!1,message:"",progress:0}),ge=l=>{l&&O.push({name:"SellerSalesDetail",params:{id:l}})};Ue(async()=>{if(!se){O.back();return}try{const l=await Ae(Ve(Z,"users",se));if(l.exists())m.value={id:l.id,...l.data()};else{O.back();return}const e=Fe(ue(Z,"users"),_e("role","in",["seller","dealer"]),_e("createdBy","==",se)),o=await ce(e);W.value=o.docs.map(n=>({id:n.id,...n.data()})).filter(n=>n.isDeleted===!1||n.isDeleted==="false"||!n.isDeleted);const r=await ce(ue(Z,"sales_reports"));T.value=r.docs.map(n=>({id:n.id,...n.data()}));const i=await ce(ue(Z,"settings_units"));if(ae.value=i.docs.map(n=>n.data()),T.value.length>0){const n=T.value.filter(p=>p.createdAt||p.date);if(n.length>0){const p=n.map(_=>_.createdAt||_.date).sort((_,N)=>new Date(N)-new Date(_))[0],x=new Date(p);S.value=x.getFullYear(),I.value=x.getMonth();const u=x.getFullYear(),v=String(x.getMonth()+1).padStart(2,"0"),z=String(x.getDate()).padStart(2,"0");F.value=`${u}-${v}-${z}`}}}catch(l){console.error("Error fetching data:",l)}finally{Y.value=!1}});const fe=H(()=>{if(T.value.length===0)return[new Date().getFullYear()];const l=new Set(T.value.map(e=>{const o=e.createdAt||e.date;return o?new Date(o).getFullYear():new Date().getFullYear()}));return Array.from(l).sort((e,o)=>o-e)}),ve=H(()=>{if(T.value.length===0)return[{index:new Date().getMonth(),name:ne[new Date().getMonth()]}];const l=T.value.filter(o=>{const r=o.createdAt||o.date;return r&&new Date(r).getFullYear()===parseInt(S.value)}),e=new Set(l.map(o=>new Date(o.createdAt||o.date).getMonth()));return Array.from(e).sort((o,r)=>o-r).map(o=>({index:o,name:ne[o]}))});ee(S,()=>{const l=ve.value;l.find(e=>e.index===I.value)||l.length>0&&(I.value=l[l.length-1].index)});const Ce=l=>{if(!l)return!1;const e=new Date(l);if(isNaN(e.getTime()))return!1;const o=e.getFullYear(),r=e.getMonth(),i=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),p=String(e.getDate()).padStart(2,"0"),x=`${i}-${n}-${p}`;return y.value==="daily"?x===F.value:y.value==="monthly"?r===parseInt(I.value)&&o===parseInt(S.value):y.value==="yearly"?o===parseInt(S.value):y.value==="custom"?x>=G.value&&x<=Q.value:!1},he=H(()=>{let l=[];return W.value.forEach(e=>{const o=T.value.filter(n=>{const p=n.createdBy===m.value.id,u=(n.uid||n.sellerId)===e.id||n.sellerName===e.fullName,v=n.createdAt||n.date;return p&&u&&Ce(v)});if(f.value==="sellers"){l.push({...e,uniqueId:e.id});return}let r=!1,i={};o.forEach(n=>{(n.items||[]).forEach(p=>{let x=p.type==="wholesale"?"បោះដុំ":"លក់រាយ";if(w.value==="all"||w.value===x){r=!0;let u=p.name||"មិនស្គាល់ឈ្មោះ",v=`${u}_${x}`;i[v]||(i[v]={productName:u,saleType:x,unitCounts:{},revenueUSD:0,revenueKHR:0,clients:0});const z=(p.unit||"unknown").toLowerCase().trim();i[v].unitCounts[z]||(i[v].unitCounts[z]=0),i[v].unitCounts[z]+=Number(p.qty||0);const _=Number(p.qty||0)*Number(p.price||0),N=n.currency||"USD";N==="USD"||N==="$"?i[v].revenueUSD+=_:i[v].revenueKHR+=_,i[v].clients+=1}})}),r?Object.values(i).forEach((n,p)=>{l.push({...e,uniqueId:`${e.id}_report_${p}`,productName:n.productName,saleType:n.saleType,totalClients:n.clients,revenueUSD:n.revenueUSD,revenueKHR:n.revenueKHR,unitCounts:n.unitCounts,hasSales:!0})}):w.value==="all"&&l.push({...e,uniqueId:`${e.id}_empty`,hasSales:!1})}),l.sort((e,o)=>e.hasSales&&!o.hasSales?-1:!e.hasSales&&o.hasSales?1:(o.revenueUSD||0)-(e.revenueUSD||0))});ee(f,l=>{l==="report"&&(B.value="list"),k.value=1}),ee(w,()=>{k.value=1}),ee(R,()=>{k.value=1});const M=H(()=>{if(!R.value)return he.value;const l=R.value.toLowerCase();return he.value.filter(e=>e.fullName&&e.fullName.toLowerCase().includes(l)||e.idNumber&&e.idNumber.toLowerCase().includes(l)||e.productName&&e.productName.toLowerCase().includes(l))}),K=H(()=>Math.ceil(M.value.length/le)||1),me=H(()=>{const l=(k.value-1)*le;return M.value.slice(l,l+le)}),ze=()=>{k.value>1&&k.value--},De=()=>{k.value<K.value&&k.value++},Me=l=>{k.value=l},we=l=>{const e=new Set(V.value);e.has(l)?e.delete(l):e.add(l),V.value=e},C=H(()=>{let l={all:{usd:0,khr:0,clients:0,totalUnitsCount:0,units:{}}};return f.value==="sellers"||M.value.forEach(e=>{if(e.hasSales){l.all.clients+=e.totalClients||0,l.all.usd+=e.revenueUSD||0,l.all.khr+=e.revenueKHR||0;for(const[o,r]of Object.entries(e.unitCounts||{}))r>0&&(l.all.units[o]=(l.all.units[o]||0)+r,l.all.totalUnitsCount+=r)}}),l}),je=H(()=>{let l="";if(y.value==="daily"&&(l=new Intl.DateTimeFormat("km-KH",{dateStyle:"long"}).format(new Date(F.value))),y.value==="monthly"&&(l=`ខែ ${ne[I.value]} ឆ្នាំ ${S.value}`),y.value==="yearly"&&(l=`ឆ្នាំ ${S.value}`),y.value==="custom"){const o=new Intl.DateTimeFormat("km-KH",{dateStyle:"medium"}).format(new Date(G.value)),r=new Intl.DateTimeFormat("km-KH",{dateStyle:"medium"}).format(new Date(Q.value));l=`${o} ដល់ ${r}`}const e=w.value==="all"?"សរុប (All)":w.value;return f.value==="report"?`${l} - ${e}`:l}),q=l=>{if(!l)return"";const e=String(l),o=ae.value.find(i=>String(i.value)===e);if(o)return o.label;const r=e.toLowerCase().trim();return r==="bottle"||r==="bottles"?"ដប":r==="pack"||r==="packs"?"កញ្ចប់":r==="case"||r==="cases"?"កេះ":e},Te=l=>{if(!l)return"text-slate-700 bg-slate-50 border-slate-200";const e=String(l),o=ae.value.find(n=>String(n.value)===e),r=o?o.color:"slate",i={cyan:"text-cyan-700 bg-cyan-50 border-cyan-200",purple:"text-purple-700 bg-purple-50 border-purple-200",amber:"text-amber-700 bg-amber-50 border-amber-200",rose:"text-rose-700 bg-rose-50 border-rose-200",emerald:"text-emerald-700 bg-emerald-50 border-emerald-200",blue:"text-blue-700 bg-blue-50 border-blue-200",slate:"text-slate-700 bg-slate-50 border-slate-200"};return i[r]||i.slate},Ne=()=>{const l=f.value==="report",e=m.value?.fullName||"Admin",o=l?`Sales_Report_${e}`:`Sellers_List_${e}`,r=M.value.map((x,u)=>({...x,printIndex:u+1})),i=ye(r,1,1,!0),n=document.createElement("iframe");n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.border="none",document.body.appendChild(n);const p=n.contentWindow.document;p.open(),p.write(`
        <html>
        <head>
            <title>${o}</title>
            <link href="https://fonts.googleapis.com/css2?family=Battambong:wght@400;700;900&family=Kantumruy+Pro:wght@400;700&display=swap" rel="stylesheet">
            <style>
                @page { size: A4 portrait; margin: 0; }
                body { font-family: 'Battambong', 'Kantumruy Pro', sans-serif; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; margin: 0; padding: 15mm; background-color: white; }
                table { width: 100%; border-collapse: collapse; }
                tr { page-break-inside: avoid; page-break-after: auto; }
                thead { display: table-header-group; }
                tfoot { display: table-footer-group; }
            </style>
        </head>
        <body>${i}</body>
        </html>
    `),p.close(),n.contentWindow.document.fonts.ready.then(()=>{n.contentWindow.focus(),n.contentWindow.print(),setTimeout(()=>{document.body.removeChild(n)},1e3)})},Le=async()=>{$.value={active:!0,message:"កំពុងបំបែកទិន្នន័យ...",progress:10};const l=f.value==="report";try{const e=[];let o=[...M.value],r=1;for(;o.length>0;){let u=l?8:14;l&&o.length<=u&&o.length>5&&(u=5),e.push(o.slice(0,u).map(v=>({...v,printIndex:r++}))),o=o.slice(u)}const i=new We("p","mm","a4"),n=210;for(let u=0;u<e.length;u++){$.value.message=`កំពុងថតចម្លងទំព័រទី ${u+1} នៃ ${e.length}...`,P.value.innerHTML=ye(e[u],u+1,e.length,!1),await Ge(),await document.fonts.ready,await new Promise(re=>setTimeout(re,600));const z=(await Qe(P.value.querySelector(".print-page"),{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff",windowWidth:1e3})).toDataURL("image/jpeg",1);u>0&&i.addPage();const _=i.getImageProperties(z),N=_.height*n/_.width;i.addImage(z,"JPEG",0,0,n,N),$.value.progress=10+Math.round((u+1)/e.length*80)}$.value.message="កំពុងរក្សាទុកឯកសារ...",$.value.progress=100;const p=m.value?.fullName||"Admin",x=l?`Sales_Report_${p}.pdf`:`Sellers_List_${p}.pdf`;i.save(x)}catch(e){console.error(e),alert("មិនអាចទាញយក PDF បានទេ")}finally{P.value&&(P.value.innerHTML=""),$.value.active=!1}},ye=(l,e,o,r=!1)=>{const i=f.value==="report";let n=l,p=null;r&&l.length>0&&i&&(n=l.slice(0,l.length-1),p=l[l.length-1]);const x=c=>{if(i){let J=c.hasSales?'<div style="overflow: hidden;">'+Object.entries(c.unitCounts||{}).filter(([U,E])=>E>0).map(([U,E])=>`<div style="float: left; margin: 0 12px 6px 0;">
                        <span style="font-weight: 900; color: #1e293b; font-size: 14px;">${E.toLocaleString()}</span>
                        <span style="color: #64748b; font-size: 12px; font-weight: bold; margin-left: 4px;">${q(U)}</span>
                     </div>`).join("")+'<div style="clear: both;"></div></div>':'<span style="color:#94a3b8; font-size:12px; font-weight:bold;">គ្មានការលក់</span>',de=c.hasSales?`<div style="text-align: right;">
                    <span style="color:#059669; font-size:16px; font-weight:900; display: inline-block;">${c.revenueUSD?.toLocaleString()||0} $</span><br/>
                    <span style="color:#2563eb; font-size:13px; font-weight:bold; display: inline-block; margin-top: 2px;">${c.revenueKHR?.toLocaleString()||0} ៛</span>
                </div>`:'<div style="text-align: right; color:#94a3b8; font-weight:bold; font-size:14px;">-</div>';const X=c.saleType==="បោះដុំ"?'<span style="color: #7e22ce; font-size: 13px; font-weight: bold;">បោះដុំ</span>':'<span style="color: #475569; font-size: 13px; font-weight: bold;">លក់រាយ</span>';return`
                <tr style="break-inside: avoid; page-break-inside: avoid; border-bottom: 1px dashed #e2e8f0;">
                    <td style="padding: 16px 10px; text-align: center; vertical-align: top; color: #94a3b8; font-weight: 900;">${c.printIndex}</td>
                    <td style="padding: 16px 10px; vertical-align: top;">
                        <p style="font-weight: bold; color: #1e293b; font-size: 15px; margin: 0;">${c.fullName}</p>
                        <p style="font-family: monospace; color: #64748b; font-size: 11px; margin: 4px 0 0 0;">ID: ${c.idNumber||"N/A"}</p>
                    </td>
                    <td style="padding: 16px 10px; vertical-align: top; font-weight: bold; color: #1e293b; font-size: 14px;">${c.hasSales?c.productName:"-"}</td>
                    <td style="padding: 16px 10px; vertical-align: top;">${J}</td>
                    <td style="padding: 16px 10px; vertical-align: top; text-align: center;">${c.hasSales?X:"-"}</td>
                    <td style="padding: 16px 10px; text-align: center; vertical-align: top; font-weight: bold; color: #334155; font-size: 15px;">${c.hasSales?(c.totalClients||0)+" នាក់":"-"}</td>
                    <td style="padding: 16px 10px; vertical-align: top;">${de}</td>
                </tr>
            `}else return`
                <tr style="border-bottom: 1px dashed #e2e8f0; break-inside: avoid; page-break-inside: avoid;">
                    <td style="padding: 16px 10px; text-align: center; vertical-align: middle; font-weight: 900; color: #94a3b8; font-size: 14px;">${c.printIndex}</td>
                    <td style="padding: 16px 10px; vertical-align: middle;">
                        <p style="font-weight: bold; color: #1e293b; font-size: 15px; margin: 0;">${c.fullName}</p>
                    </td>
                    <td style="padding: 16px 10px; text-align: center; vertical-align: middle; font-weight: bold; color: #475569; font-size: 13px;">${c.idNumber||"-"}</td>
                    <td style="padding: 16px 10px; text-align: center; vertical-align: middle; font-weight: bold; color: #475569; font-size: 13px;">${c.phoneNumber||"-"}</td>
                </tr>
            `},u=n.map(x).join(""),v=p?x(p):"";let z="";e===1&&(z=`
            <div style="border-bottom: 2px solid #e2e8f0; padding-bottom: 20px; margin-bottom: 25px; overflow: hidden;">
                <div style="float: left;">
                    <p style="font-size: 12px; color: #64748b; font-weight: bold; text-transform: uppercase; margin: 0 0 5px 0;">អ្នកគ្រប់គ្រង (Admin)</p>
                    <h2 style="font-size: 24px; font-weight: 900; color: #0f172a; margin: 0 0 8px 0;">${m.value?.fullName||"N/A"}</h2>
                    <span style="font-size: 14px; color: #475569; font-weight: bold;">@${m.value?.username||"N/A"} ${m.value?.telegram?`| Tel: ${m.value.telegram}`:""}</span>
                </div>
                <div style="float: right; margin-top: 15px;">
                    <span style="border: 2px solid #cbd5e1; color: #334155; padding: 8px 16px; border-radius: 8px; font-weight: bold; font-size: 14px;">
                        តំណាងលក់សរុប: ${W.value?.length||0} នាក់
                    </span>
                </div>
                <div style="clear: both;"></div>
            </div>
        `);let _="";if(i&&(e===o||r)){const c=Object.entries(C.value.all.units);let J="";for(let U=0;U<c.length;U+=2){const[E,He]=c[U],pe=c[U+1],Ie=`
                <td style="width: 50%; padding: 6px 16px 6px 0; vertical-align: top;">
                    <div style="overflow: hidden; border-bottom: 1px dotted #e2e8f0; padding-bottom: 4px;">
                        <span style="color: #475569; font-size: 14px; font-weight: bold; float: left;">${q(E)}</span>
                        <span style="font-weight: 900; color: #0f172a; font-size: 16px; float: right;">${He.toLocaleString()}</span>
                        <div style="clear: both;"></div>
                    </div>
                </td>`,Be=pe?`
                <td style="width: 50%; padding: 6px 0 6px 16px; vertical-align: top;">
                    <div style="overflow: hidden; border-bottom: 1px dotted #e2e8f0; padding-bottom: 4px;">
                        <span style="color: #475569; font-size: 14px; font-weight: bold; float: left;">${q(pe[0])}</span>
                        <span style="font-weight: 900; color: #0f172a; font-size: 16px; float: right;">${pe[1].toLocaleString()}</span>
                        <div style="clear: both;"></div>
                    </div>
                </td>`:'<td style="width: 50%;"></td>';J+=`<tr>${Ie}${Be}</tr>`}const de=c.length>0?`<table style="width: 100%; border-collapse: collapse; border: none;"><tbody>${J}</tbody></table>`:'<p style="color: #94a3b8; font-size: 14px; margin: 0;">គ្មានទិន្នន័យ</p>',X=w.value==="all"?"":`- ${w.value}`;_=`
            <div style="margin-top: 40px; border-top: 2px solid #cbd5e1; padding-top: 30px; overflow: hidden; break-inside: avoid; page-break-inside: avoid; width: 100%; display: table;">
                <div style="display: table-cell; width: 60%; padding-right: 30px; vertical-align: top;">
                    <div style="margin-bottom: 16px; overflow: hidden; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px;">
                        <h3 style="font-size: 16px; font-weight: 900; color: #1e293b; margin: 0; float: left;">សរុបបរិមាណលក់តាមប្រភេទ ${X}</h3>
                        <div style="clear: both;"></div>
                    </div>
                    <div>${de}</div>
                </div>

                <div style="display: table-cell; width: 40%; vertical-align: top; border-left: 1px solid #e2e8f0; padding-left: 30px;">
                    <div style="margin-bottom: 16px; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px;">
                        <h3 style="font-size: 16px; font-weight: 900; color: #1e293b; margin: 0;">សរុបរួម (Grand Total) ${X}</h3>
                    </div>
                    <div>
                        <table style="width: 100%; border-collapse: collapse; border: none;">
                            <tr>
                                <td style="padding-bottom: 12px; color: #64748b; font-size: 14px; font-weight: bold;">អតិថិជនសរុប:</td>
                                <td style="padding-bottom: 12px; text-align: right; font-weight: 900; color: #0f172a; font-size: 16px;">
                                    ${C.value.all.clients.toLocaleString()} នាក់
                                </td>
                            </tr>
                            <tr>
                                <td style="padding-top: 12px; padding-bottom: 8px; border-top: 1px dashed #cbd5e1; color: #64748b; font-size: 14px; font-weight: bold;">ចំណូល (USD):</td>
                                <td style="padding-top: 12px; padding-bottom: 8px; border-top: 1px dashed #cbd5e1; text-align: right; font-weight: 900; color: #059669; font-size: 22px;">${C.value.all.usd.toLocaleString()} $</td>
                            </tr>
                            <tr>
                                <td style="padding-top: 4px; color: #64748b; font-size: 14px; font-weight: bold;">ចំណូល (KHR):</td>
                                <td style="padding-top: 4px; text-align: right; font-weight: 900; color: #2563eb; font-size: 16px;">${C.value.all.khr.toLocaleString()} ៛</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        `}const N=r?"width: 100%; box-sizing: border-box; font-family: 'Battambong', 'Kantumruy Pro', sans-serif; line-height: 1.6; padding: 20px;":"width: 1000px; min-height: 1414px; background: white; padding: 40px; box-sizing: border-box; font-family: 'Battambong', 'Kantumruy Pro', sans-serif; line-height: 1.6; position: relative;",re=i?"របាយការណ៍លក់របស់តំណាងលក់":"បញ្ជីរាយនាមតំណាងលក់",ke=i?`
        <th style="padding: 16px 10px; width: 5%; text-align: center; border-bottom: 2px solid #cbd5e1;">#</th>
        <th style="padding: 16px 10px; width: 25%; border-bottom: 2px solid #cbd5e1;">តំណាងលក់</th>
        <th style="padding: 16px 10px; width: 20%; border-bottom: 2px solid #cbd5e1;">ប្រភេទ (ទំនិញ)</th>
        <th style="padding: 16px 10px; width: 15%; border-bottom: 2px solid #cbd5e1;">ចំនួនលក់</th>
        <th style="padding: 16px 10px; width: 10%; text-align: center; border-bottom: 2px solid #cbd5e1;">ការលក់</th>
        <th style="padding: 16px 10px; width: 10%; text-align: center; border-bottom: 2px solid #cbd5e1;">អតិថិជន</th>
        <th style="padding: 16px 10px; width: 15%; text-align: right; border-bottom: 2px solid #cbd5e1;">ចំណូល</th>
    `:`
        <th style="padding: 16px 10px; width: 5%; text-align: center; border-bottom: 2px solid #cbd5e1;">#</th>
        <th style="padding: 16px 10px; border-bottom: 2px solid #cbd5e1;">តំណាងលក់</th>
        <th style="padding: 16px 10px; text-align: center; border-bottom: 2px solid #cbd5e1;">អត្តលេខ</th>
        <th style="padding: 16px 10px; text-align: center; border-bottom: 2px solid #cbd5e1;">លេខទូរស័ព្ទ</th>
    `;let ie="";return r&&i?ie=`
            <table style="width: 100%; text-align: left; border-collapse: collapse; background-color: #ffffff;">
                <thead style="color: #334155; font-size: 13px; font-weight: 900; display: table-header-group; text-transform: uppercase; letter-spacing: 0.5px;">
                    <tr>${ke}</tr>
                </thead>
                <tbody>${u}</tbody>
                <tbody style="break-inside: avoid; page-break-inside: avoid;">
                    ${v}
                    <tr><td colspan="7" style="padding: 0; border: none;">${_}</td></tr>
                </tbody>
            </table>
        `:ie=`
            <table style="width: 100%; text-align: left; border-collapse: collapse; background-color: #ffffff;">
                <thead style="color: #334155; font-size: 13px; font-weight: 900; display: table-header-group; text-transform: uppercase; letter-spacing: 0.5px;">
                    <tr>${ke}</tr>
                </thead>
                <tbody>${u}${v}</tbody>
            </table>
            ${_}
        `,`
        <div class="print-page" style="${N}">
            <div style="text-align: center; margin-bottom: 30px; padding-bottom: 20px;">
                <h1 style="font-size: 28px; font-weight: 900; color: #1e293b; margin: 0; text-align: center; width: 100%; text-transform: uppercase;">${re}</h1>
            </div>
            ${z}
            <div style="flex: 1;">${ie}</div>
            <div style="margin-top: 40px; padding-top: 15px; border-top: 1px solid #e2e8f0; font-size: 12px; font-weight: bold; color: #94a3b8; overflow: hidden;">
                <div style="float: left;">
                    <span style="color: #475569; font-size: 14px; font-weight: 900;">កាលបរិច្ឆេទ: ${je.value}</span>
                    &nbsp;&nbsp;|&nbsp;&nbsp;ថ្ងៃបញ្ចេញរបាយការណ៍: ${new Date().toLocaleString("km-KH")}
                </div>
                <div style="float: right;">${r?"":`ទំព័រទី ${e} នៃ ${o}`}</div>
                <div style="clear: both;"></div>
            </div>
        </div>
    `};return(l,e)=>(a(),s("div",Xe,[t("div",Ze,[t("div",et,[t("div",tt,[t("div",ot,[t("button",{onClick:e[0]||(e[0]=o=>Pe(O).back()),class:"w-10 h-10 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 flex items-center justify-center transition-colors"},[...e[19]||(e[19]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),e[20]||(e[20]=xe('<div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-slate-700 to-indigo-900 flex items-center justify-center shadow-lg shadow-slate-500/30 text-white shrink-0" data-v-e99f2d5b><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e99f2d5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" data-v-e99f2d5b></path></svg></div><div data-v-e99f2d5b><h1 class="text-xl md:text-2xl font-black text-slate-800 tracking-tight leading-tight" data-v-e99f2d5b>ព័ត៌មានលម្អិតអ្នកគ្រប់គ្រង</h1><p class="text-slate-500 text-[11px] md:text-xs font-bold mt-0.5 uppercase tracking-wider" data-v-e99f2d5b>Admin Report Details</p></div>',2))]),t("div",lt,[(a(),s(h,null,j($e,o=>t("button",{key:o.key,onClick:r=>y.value=o.key,class:D(["flex-1 xl:flex-none px-5 py-2.5 rounded-xl text-xs md:text-sm font-bold transition-all duration-300 whitespace-nowrap relative",y.value===o.key?"text-indigo-600 shadow-md bg-white":"text-slate-500 hover:text-slate-800 hover:bg-slate-200/50"])},d(o.label),11,st)),64))])]),t("div",at,[Y.value?g("",!0):(a(),s(h,{key:0},[y.value==="daily"?(a(),s("div",nt,[e[21]||(e[21]=t("span",{class:"text-slate-400 text-[10px] font-black uppercase tracking-wider"},"ថ្ងៃទី",-1)),A(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>F.value=o),type:"date",class:"w-full bg-transparent border-none text-slate-700 font-bold text-sm focus:ring-0 outline-none p-0 cursor-pointer"},null,512),[[te,F.value]])])):g("",!0),y.value==="monthly"?(a(),s("div",rt,[t("div",it,[A(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>I.value=o),class:"w-full appearance-none bg-white border border-slate-200 pl-4 pr-10 py-2.5 rounded-xl text-sm font-bold text-slate-700 outline-none shadow-sm cursor-pointer min-w-[140px]"},[(a(!0),s(h,null,j(ve.value,o=>(a(),s("option",{key:o.index,value:o.index},d(o.name),9,dt))),128))],512),[[be,I.value]]),e[22]||(e[22]=t("svg",{class:"w-4 h-4 absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),t("div",pt,[A(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>S.value=o),class:"w-full appearance-none bg-white border border-slate-200 pl-4 pr-10 py-2.5 rounded-xl text-sm font-bold text-slate-700 outline-none shadow-sm cursor-pointer"},[(a(!0),s(h,null,j(fe.value,o=>(a(),s("option",{key:o,value:o},d(o),9,ut))),128))],512),[[be,S.value]]),e[23]||(e[23]=t("svg",{class:"w-4 h-4 absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])])):g("",!0),y.value==="yearly"?(a(),s("div",ct,[A(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>S.value=o),class:"w-full appearance-none bg-white border border-slate-200 pl-4 pr-10 py-2.5 rounded-xl text-sm font-bold text-slate-700 outline-none shadow-sm cursor-pointer min-w-[120px]"},[(a(!0),s(h,null,j(fe.value,o=>(a(),s("option",{key:o,value:o},d(o),9,xt))),128))],512),[[be,S.value]]),e[24]||(e[24]=t("svg",{class:"w-4 h-4 absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])):g("",!0),y.value==="custom"?(a(),s("div",bt,[A(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>G.value=o),type:"date",class:"w-full flex-1 bg-transparent border-none text-slate-700 font-bold text-sm focus:ring-0 outline-none p-0 cursor-pointer"},null,512),[[te,G.value]]),e[25]||(e[25]=t("div",{class:"w-4 h-px bg-slate-300"},null,-1)),A(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>Q.value=o),type:"date",class:"w-full flex-1 bg-transparent border-none text-slate-700 font-bold text-sm focus:ring-0 outline-none p-0 cursor-pointer"},null,512),[[te,Q.value]])])):g("",!0)],64))])])]),Y.value?(a(),s("div",gt,[...e[26]||(e[26]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-indigo-600 mb-4"},null,-1),t("p",{class:"text-slate-500 font-bold tracking-wide"},"កំពុងទាញយកទិន្នន័យ...",-1)])])):(a(),s("div",ft,[t("div",vt,[e[29]||(e[29]=t("div",{class:"absolute -right-10 -top-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"},null,-1)),t("div",ht,[t("img",{src:m.value.photoUrl||`https://ui-avatars.com/api/?name=${m.value.fullName}`,class:"w-24 h-24 rounded-3xl object-cover border-4 border-white/20 shadow-xl shrink-0 bg-white"},null,8,mt),t("div",wt,[t("h2",yt,d(m.value.fullName),1),t("div",kt,[t("span",_t,"@"+d(m.value.username),1),m.value.telegram?(a(),s("a",{key:0,href:"https://t.me/"+m.value.telegram.replace("@",""),target:"_blank",class:"flex items-center gap-1.5 text-sky-400 hover:text-sky-300 transition-colors"},[e[27]||(e[27]=t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.48-.94-2.4-1.54-1.06-.7-.37-1.09.23-1.72.16-.16 2.87-2.63 2.92-2.85.01-.03.01-.14-.06-.2-.06-.06-.17-.04-.25-.02-.11.02-1.91 1.2-5.39 3.55-.5.34-.95.51-1.35.5-.44-.01-1.29-.25-1.92-.42-.77-.21-1.37-.32-1.31-.68.03-.18.28-.37.76-.56 3.03-1.32 5.06-2.19 6.09-2.62 2.93-1.21 3.53-1.43 3.93-1.43.09 0 .28.01.4.04.1.03.24.1.33.25.08.16.07.32.07.33z"})],-1)),L(" "+d(m.value.telegram),1)],8,St)):g("",!0)]),t("div",$t,[t("div",Ct,[e[28]||(e[28]=t("span",{class:"w-2 h-2 rounded-full bg-emerald-400"},null,-1)),t("span",zt,"តំណាងលក់សរុប: "+d(W.value.length)+" នាក់",1)])])])])]),t("div",Dt,[t("div",Mt,[t("button",{onClick:e[7]||(e[7]=o=>f.value="sellers"),class:D([f.value==="sellers"?"bg-indigo-50 text-indigo-600":"text-slate-500 hover:text-slate-800","flex-1 sm:flex-none px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300"])}," បញ្ជីតំណាងលក់ ",2),t("button",{onClick:e[8]||(e[8]=o=>f.value="report"),class:D([f.value==="report"?"bg-indigo-50 text-indigo-600":"text-slate-500 hover:text-slate-800","flex-1 sm:flex-none px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300"])}," របាយការណ៍លក់ ",2)]),t("div",jt,[t("div",Tt,[e[31]||(e[31]=t("span",{class:"absolute inset-y-0 left-0 pl-3 flex items-center text-slate-400 pointer-events-none"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),A(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>R.value=o),type:"text",placeholder:"ស្វែងរកឈ្មោះ ឬ អត្តលេខ...",class:"w-full pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold focus:bg-white focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all placeholder:font-normal"},null,512),[[te,R.value]]),R.value?(a(),s("button",{key:0,onClick:e[10]||(e[10]=o=>R.value=""),class:"absolute inset-y-0 right-2 flex items-center text-slate-400 hover:text-rose-500"},[...e[30]||(e[30]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):g("",!0)]),t("div",Nt,[f.value==="report"?(a(),s("div",Lt,[t("button",{onClick:e[11]||(e[11]=o=>w.value="all"),class:D([w.value==="all"?"bg-white shadow-sm text-slate-800":"text-slate-500 hover:text-slate-700","px-3 py-1.5 rounded-lg text-xs font-bold transition-all"])}," ទាំងអស់ ",2),t("button",{onClick:e[12]||(e[12]=o=>w.value="បោះដុំ"),class:D([w.value==="បោះដុំ"?"bg-white shadow-sm text-purple-700":"text-slate-500 hover:text-purple-700","px-3 py-1.5 rounded-lg text-xs font-bold transition-all"])}," បោះដុំ ",2),t("button",{onClick:e[13]||(e[13]=o=>w.value="លក់រាយ"),class:D([w.value==="លក់រាយ"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-indigo-600","px-3 py-1.5 rounded-lg text-xs font-bold transition-all"])}," លក់រាយ ",2)])):g("",!0),f.value==="sellers"?(a(),s("div",Ht,[t("button",{onClick:e[14]||(e[14]=o=>B.value="card"),class:D([B.value==="card"?"bg-white shadow-sm text-indigo-600":"text-slate-400 hover:text-slate-600","p-1.5 rounded-lg transition-all"]),title:"Card View"},[...e[32]||(e[32]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),t("button",{onClick:e[15]||(e[15]=o=>B.value="list"),class:D([B.value==="list"?"bg-white shadow-sm text-indigo-600":"text-slate-400 hover:text-slate-600","p-1.5 rounded-lg transition-all"]),title:"List View"},[...e[33]||(e[33]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)])],2)])):g("",!0),t("button",{onClick:Ne,disabled:M.value.length===0,class:"bg-slate-800 hover:bg-slate-900 text-white px-3 py-2 rounded-xl text-xs font-bold shadow-md transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-1.5 shrink-0"},[...e[34]||(e[34]=[t("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2-2v4h10z"})],-1),L(" Print ",-1)])],8,It),t("button",{onClick:Le,disabled:M.value.length===0||$.value.active,class:"bg-rose-500 hover:bg-rose-600 text-white px-3 py-2 rounded-xl text-xs font-bold shadow-md shadow-rose-500/30 transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-1.5 shrink-0"},[...e[35]||(e[35]=[t("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),L(" PDF ",-1)])],8,Bt)])])]),M.value.length===0?(a(),s("div",Rt,[...e[36]||(e[36]=[xe('<div class="text-center bg-white p-12 rounded-[2rem] border-2 border-dashed border-slate-200" data-v-e99f2d5b><div class="w-20 h-20 bg-slate-50 text-slate-400 rounded-full flex items-center justify-center mx-auto mb-4" data-v-e99f2d5b><svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e99f2d5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-e99f2d5b></path></svg></div><p class="text-slate-500 font-bold text-xl" data-v-e99f2d5b>មិនមានទិន្នន័យទេ</p><p class="text-slate-400 text-sm mt-2" data-v-e99f2d5b>សូមព្យាយាមស្វែងរកម្ដងទៀត ឬផ្លាស់ប្តូរកាលបរិច្ឆេទ</p></div>',1)])])):B.value==="card"&&f.value==="sellers"?(a(),s("div",Ut,[(a(!0),s(h,null,j(me.value,o=>(a(),s("div",{key:o.id,onClick:r=>ge(o.id),class:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm hover:shadow-md hover:border-indigo-200 transition-all flex flex-col justify-between group cursor-pointer"},[t("div",Vt,[t("img",{src:o.photoUrl||`https://ui-avatars.com/api/?name=${o.fullName}`,class:"w-16 h-16 rounded-2xl object-cover border border-slate-100 shadow-sm group-hover:scale-105 transition-transform shrink-0"},null,8,Ft),t("div",Pt,[t("h4",Kt,d(o.fullName),1),t("p",qt,"ID: "+d(o.idNumber||"N/A"),1),o.telegram?(a(),s("a",{key:0,href:"https://t.me/"+o.telegram.replace("@",""),target:"_blank",onClick:e[16]||(e[16]=oe(()=>{},["stop"])),class:"inline-flex items-center gap-1.5 text-[11px] font-bold text-sky-600 bg-sky-50 px-2.5 py-1 rounded-lg hover:bg-sky-500 hover:text-white transition-colors"},[e[37]||(e[37]=t("svg",{class:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.48-.94-2.4-1.54-1.06-.7-.37-1.09.23-1.72.16-.16 2.87-2.63 2.92-2.85.01-.03.01-.14-.06-.2-.06-.06-.17-.04-.25-.02-.11.02-1.91 1.2-5.39 3.55-.5.34-.95.51-1.35.5-.44-.01-1.29-.25-1.92-.42-.77-.21-1.37-.32-1.31-.68.03-.18.28-.37.76-.56 3.03-1.32 5.06-2.19 6.09-2.62 2.93-1.21 3.53-1.43 3.93-1.43.09 0 .28.01.4.04.1.03.24.1.33.25.08.16.07.32.07.33z"})],-1)),L(" @"+d(o.telegram.replace("@","")),1)],8,Et)):g("",!0)])]),t("div",Ot,[t("span",Yt,[e[38]||(e[38]=t("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),L(" "+d(o.phoneNumber||"N/A"),1)])])],8,At))),128))])):B.value==="list"||f.value==="report"?(a(),s("div",Wt,[t("div",Gt,[t("table",Qt,[t("thead",Jt,[t("tr",null,[e[47]||(e[47]=t("th",{class:"px-6 py-5 text-center w-16 whitespace-nowrap"},"#",-1)),e[48]||(e[48]=t("th",{class:"px-6 py-5 whitespace-nowrap"},"តំណាងលក់",-1)),f.value==="sellers"?(a(),s(h,{key:0},[e[39]||(e[39]=t("th",{class:"px-6 py-5 text-center whitespace-nowrap"},"អត្តលេខ",-1)),e[40]||(e[40]=t("th",{class:"px-6 py-5 text-center whitespace-nowrap"},"លេខទូរស័ព្ទ",-1)),e[41]||(e[41]=t("th",{class:"px-6 py-5 text-center whitespace-nowrap"},"តេឡេក្រាម",-1))],64)):(a(),s(h,{key:1},[e[42]||(e[42]=t("th",{class:"px-6 py-5 whitespace-nowrap w-48"},"ប្រភេទ (ទំនិញ)",-1)),e[43]||(e[43]=t("th",{class:"px-6 py-5 w-[25%] whitespace-nowrap"},"ចំនួនលក់ (Units)",-1)),e[44]||(e[44]=t("th",{class:"px-6 py-5 text-center whitespace-nowrap"},"ការលក់ (Type)",-1)),e[45]||(e[45]=t("th",{class:"px-6 py-5 text-center whitespace-nowrap"},"អតិថិជន",-1)),e[46]||(e[46]=t("th",{class:"px-6 py-5 text-right whitespace-nowrap"},"ចំណូល",-1))],64))])]),t("tbody",Xt,[(a(!0),s(h,null,j(me.value,(o,r)=>(a(),s("tr",{key:o.uniqueId,onClick:i=>ge(o.id),class:"hover:bg-slate-50/80 transition-colors group cursor-pointer"},[t("td",eo,d((k.value-1)*le+r+1),1),t("td",to,[t("div",oo,[t("img",{src:o.photoUrl||`https://ui-avatars.com/api/?name=${o.fullName}`,class:"w-12 h-12 rounded-xl object-cover border border-slate-200 shadow-sm shrink-0"},null,8,lo),t("p",so,d(o.fullName),1)])]),f.value==="sellers"?(a(),s(h,{key:0},[t("td",ao,d(o.idNumber||"-"),1),t("td",no,d(o.phoneNumber||"-"),1),t("td",ro,[o.telegram?(a(),s("a",{key:0,href:"https://t.me/"+o.telegram.replace("@",""),target:"_blank",onClick:e[17]||(e[17]=oe(()=>{},["stop"])),class:"text-xs font-bold text-sky-600 bg-sky-50 px-3 py-1.5 rounded-lg inline-flex items-center gap-1.5 hover:bg-sky-500 hover:text-white transition-colors"},[e[49]||(e[49]=t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.48-.94-2.4-1.54-1.06-.7-.37-1.09.23-1.72.16-.16 2.87-2.63 2.92-2.85.01-.03.01-.14-.06-.2-.06-.06-.17-.04-.25-.02-.11.02-1.91 1.2-5.39 3.55-.5.34-.95.51-1.35.5-.44-.01-1.29-.25-1.92-.42-.77-.21-1.37-.32-1.31-.68.03-.18.28-.37.76-.56 3.03-1.32 5.06-2.19 6.09-2.62 2.93-1.21 3.53-1.43 3.93-1.43.09 0 .28.01.4.04.1.03.24.1.33.25.08.16.07.32.07.33z"})],-1)),L(" @"+d(o.telegram.replace("@","")),1)],8,io)):(a(),s("span",po,"-"))])],64)):(a(),s(h,{key:1},[t("td",uo,[o.hasSales?(a(),s("span",co,d(o.productName),1)):(a(),s("span",xo,"-"))]),t("td",bo,[o.hasSales?(a(),s("div",go,[(a(!0),s(h,null,j(o.unitCounts||{},(i,n,p)=>(a(),s(h,{key:n},[p<3||V.value.has(o.uniqueId)?(a(),s("span",{key:0,class:D(["inline-flex items-center px-2.5 py-1 rounded-lg text-[11px] font-bold shadow-sm border whitespace-nowrap",Te(n)])},d(i.toLocaleString())+" "+d(q(n)),3)):g("",!0)],64))),128)),Object.keys(o.unitCounts||{}).length>3?(a(),s("button",{key:0,onClick:oe(i=>we(o.uniqueId),["stop"]),class:"text-[11px] text-indigo-600 font-bold hover:text-indigo-800 bg-indigo-50 px-2.5 py-1 rounded-lg transition-colors border border-indigo-100 whitespace-nowrap"},[V.value.has(o.uniqueId)?(a(),s("span",ho,"បង្រួម")):(a(),s("span",vo,"+"+d(Object.keys(o.unitCounts).length-3)+" ទៀត",1))],8,fo)):g("",!0)])):(a(),s("span",mo,"គ្មានការលក់"))]),t("td",wo,[o.hasSales?(a(),s("span",{key:0,class:D([o.saleType==="បោះដុំ"?"bg-purple-50 text-purple-700 border-purple-200":"bg-slate-50 text-slate-700 border-slate-200","px-2.5 py-1 rounded-md text-[10px] font-bold border tracking-wide"])},d(o.saleType),3)):(a(),s("span",yo,"-"))]),t("td",ko,[o.hasSales?(a(),s("span",_o,d(o.totalClients?.toLocaleString()||0)+" នាក់",1)):(a(),s("span",So,"-"))]),t("td",$o,[o.hasSales?(a(),s("div",Co,[t("span",zo,d(o.revenueUSD?.toLocaleString()||0)+" $",1),t("span",Do,d(o.revenueKHR?.toLocaleString()||0)+" ៛",1)])):(a(),s("span",Mo,"-"))])],64))],8,Zt))),128))])])])])):g("",!0),K.value>1?(a(),s("div",jo,[t("p",To," បង្ហាញទំព័រ "+d(k.value)+" នៃ "+d(K.value),1),t("div",No,[t("button",{onClick:ze,disabled:k.value===1,class:"w-9 h-9 flex items-center justify-center rounded-xl border border-slate-200 text-slate-600 hover:bg-slate-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors"},[...e[50]||(e[50]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,Lo),(a(!0),s(h,null,j(K.value,o=>(a(),s("button",{key:o,onClick:r=>Me(o),class:D(["w-9 h-9 flex items-center justify-center rounded-xl font-bold text-sm transition-colors border",k.value===o?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"])},d(o),11,Ho))),128)),t("button",{onClick:De,disabled:k.value===K.value,class:"w-9 h-9 flex items-center justify-center rounded-xl border border-slate-200 text-slate-600 hover:bg-slate-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors"},[...e[51]||(e[51]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,Io)])])):g("",!0)])),!Y.value&&f.value==="report"&&M.value.some(o=>o.hasSales)?(a(),s("div",Bo,[t("div",Ro,[e[57]||(e[57]=xe('<div class="flex items-center gap-3 w-full md:w-auto border-b md:border-b-0 md:border-r border-slate-200 pb-3 md:pb-0 md:pr-8 shrink-0" data-v-e99f2d5b><div class="w-12 h-12 bg-indigo-600 text-white rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-500/30 shrink-0" data-v-e99f2d5b><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e99f2d5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" data-v-e99f2d5b></path></svg></div><div data-v-e99f2d5b><p class="text-slate-400 text-[11px] font-black uppercase tracking-widest" data-v-e99f2d5b>សរុបរួម</p><p class="text-slate-800 font-black text-base uppercase" data-v-e99f2d5b>Grand Total</p></div></div>',1)),t("div",Uo,[t("div",Ao,[Object.keys(C.value.all.units).length>0?(a(),s(h,{key:0},[(a(!0),s(h,null,j(C.value.all.units,(o,r,i)=>(a(),s(h,{key:r},[i<3||V.value.has("grandTotal")?(a(),s("span",Vo,d(o.toLocaleString())+" "+d(q(r)),1)):g("",!0)],64))),128)),Object.keys(C.value.all.units).length>3?(a(),s("button",{key:0,onClick:e[18]||(e[18]=oe(o=>we("grandTotal"),["stop"])),class:"text-xs font-bold text-indigo-600 hover:text-indigo-800 bg-indigo-50 px-3 py-2 rounded-xl transition-colors flex items-center gap-1 border border-indigo-100 whitespace-nowrap shadow-sm"},[V.value.has("grandTotal")?(a(),s("span",Po,"បង្រួម")):(a(),s("span",Fo,"+"+d(Object.keys(C.value.all.units).length-3)+" ទៀត",1))])):g("",!0)],64)):g("",!0)]),e[56]||(e[56]=t("div",{class:"h-10 w-px bg-slate-200 hidden md:block shrink-0"},null,-1)),t("div",Ko,[t("div",null,[e[53]||(e[53]=t("p",{class:"text-[11px] text-slate-400 font-bold uppercase mb-0.5"},"អតិថិជនសរុប",-1)),t("p",qo,[L(d(C.value.all.clients.toLocaleString())+" ",1),e[52]||(e[52]=t("span",{class:"text-xs font-bold text-slate-400"},"នាក់",-1))])]),e[55]||(e[55]=t("div",{class:"h-10 w-px bg-slate-200 hidden md:block"},null,-1)),t("div",null,[t("p",Eo,[L(d(C.value.all.usd.toLocaleString())+" ",1),e[54]||(e[54]=t("span",{class:"text-base opacity-80"},"$",-1))]),t("p",Oo,d(C.value.all.khr.toLocaleString())+" ៛",1)])])])])])):g("",!0),Ke(Ee,{"enter-active-class":"duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:qe(()=>[$.value.active?(a(),s("div",Yo,[t("div",Wo,[t("div",Go,[e[58]||(e[58]=t("div",{class:"absolute inset-0 rounded-full border-4 border-white/5"},null,-1)),e[59]||(e[59]=t("div",{class:"absolute inset-0 rounded-full border-4 border-t-rose-500 border-r-rose-500 border-b-transparent border-l-transparent animate-spin"},null,-1)),t("div",Qo,d($.value.progress)+"%",1)]),t("h3",Jo,d($.value.message),1),t("div",Xo,[t("div",{class:"h-full bg-gradient-to-r from-red-500 to-rose-600 transition-all duration-300 ease-out",style:Je({width:`${$.value.progress}%`})},null,4)])])])):g("",!0)]),_:1}),t("div",{ref_key:"printStaging",ref:P,class:"fixed top-0 left-[-9999px] pointer-events-none z-[-1] opacity-0 print:opacity-100"},null,512)]))}},ol=Re(Zo,[["__scopeId","data-v-e99f2d5b"]]);export{ol as default};
